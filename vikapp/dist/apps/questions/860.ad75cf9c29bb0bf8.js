/*! For license information please see 860.ad75cf9c29bb0bf8.js.LICENSE.txt */
(self.webpackChunkquestions=self.webpackChunkquestions||[]).push([[860],{512:(e,t,n)=>{n.d(t,{c:()=>r});var s=n(136);const r=s.forwardRef((function({title:e,titleId:t,...n},r){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}))},860:(e,t,n)=>{n.d(t,{c:()=>se});var s=n(640),r=n(184),a=n(28);const o=a.K.injectEndpoints({endpoints:e=>({getQuestionById:e.query({query:e=>({url:`question/findById/${e}`})}),getQuestionByChat:e.query({query:e=>({url:`question/findByChatId/${e}`})}),updateQuestion:e.mutation({query:({id:e,question:t})=>({url:`/question/${e}`,method:"PATCH",body:{question:t}})}),addQuestion:e.mutation({query:e=>({url:"/question",method:"POST",body:e})}),deleteQuestion:e.mutation({query:e=>({url:"/chat-category",method:"DELETE",body:{id:e}})}),countAvailableQuestion:e.query({query:e=>({url:`auto-post/countAvailableQuestionByChatId/${e}`}),providesTags:["CountAvailableQuestionGroup"]}),countPublishedQuestion:e.query({query:e=>({url:`auto-post/countPublishedQuestion/${e}`}),providesTags:["CountAvailableQuestionGroup"]})})}),{useGetQuestionByChatQuery:i,useGetQuestionByIdQuery:l,useAddQuestionMutation:c,useDeleteQuestionMutation:d,useUpdateQuestionMutation:u,useCountAvailableQuestionQuery:x,useCountPublishedQuestionQuery:h}=o,m=window.Telegram.WebApp,g=()=>{m.showAlert("Данная функция находится в разработке",console.log("inDevelopment"))},p=e=>{if(e)return m.openTelegramLink("https://t.me/more_details")};var w=n(0);const v=({chat:e})=>{window.Telegram.WebApp;const{isLoading:t,data:n,isSuccess:s}=i(e);return(0,w.jsxs)(w.Fragment,{children:[t&&(0,w.jsx)(r.Preloader,{}),s&&n.map((e=>(0,w.jsx)("li",{className:"cursor-pointer",children:(0,w.jsx)(r.SimpleAccordionMain,{description:(0,w.jsxs)(r.SimpleAccordionText,{children:[(0,w.jsxs)("span",{className:"text-xs text-[var(--tg-theme-hint-color)]",children:["Дата: ",String(e.dateadd)]}),(0,w.jsx)("p",{children:e.text}),(0,w.jsxs)("span",{className:"text-xs text-[var(--tg-theme-hint-color)]",children:["Категория: ",e.category]})]}),content:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(r.ButtonIcon,{firstIcon:!0,text:"Модерировать",color:"[var(--tg-theme-accent-text-color)]",icon:"moderate",func:g}),(0,w.jsx)(r.ButtonIcon,{firstIcon:!0,text:"Статистика",color:"[var(--tg-theme-accent-text-color)]",icon:"stat",func:g}),(0,w.jsx)(r.ButtonIcon,{firstIcon:!0,text:"Отправить",color:"[var(--tg-theme-accent-text-color)]",icon:"send",func:g}),(0,w.jsx)(r.ButtonIconConfirm,{firstIcon:!0,text:"Удалить",color:"red-500",icon:"delete",func:p,textConfirm:`Вы действительно хотите удалить вопрос №${s?n[0].id:"не success"}`})]})})})))]})},j=()=>(0,w.jsx)("ul",{role:"list",className:"divide-y divide-[var(--tg-theme-hint-color)]",children:(0,w.jsx)(v,{chat:521884639})});var f=n(796);const b=(0,f.createSlice)({name:"questionApp",initialState:{questionSlide:!1,questionType:"",questionData:void 0,addQuestion:{text:"",category:0,answer1:"",answer2:"",answer3:"",answer4:"",answerright:0}},reducers:{showQuestionSlide:(e,t)=>{e.questionSlide=t.payload},typeQuestion:(e,t)=>{e.questionType=t.payload},dataQuestion:(e,t)=>{e.questionData=t.payload},getQuestionText:(e,t)=>{e.addQuestion.text=t.payload},getQuestionCategory:(e,t)=>{e.addQuestion.category=t.payload},getQuestionAnswerOne:(e,t)=>{e.addQuestion.answer1=t.payload},getQuestionAnswerTwo:(e,t)=>{e.addQuestion.answer2=t.payload},getQuestionAnswerThree:(e,t)=>{e.addQuestion.answer3=t.payload},getQuestionAnswerFour:(e,t)=>{e.addQuestion.answer4=t.payload},getQuestionAnswerright:(e,t)=>{e.addQuestion.answerright=t.payload},getQuestionDefault:(e,t)=>{e.addQuestion.text="",e.addQuestion.category=0,e.addQuestion.answer1="",e.addQuestion.answer2="",e.addQuestion.answer3="",e.addQuestion.answer4="",e.addQuestion.answerright=0}}}),{showQuestionSlide:y,typeQuestion:N,dataQuestion:Q,getQuestionText:S,getQuestionCategory:k,getQuestionAnswerOne:A,getQuestionAnswerTwo:C,getQuestionAnswerThree:B,getQuestionAnswerFour:q,getQuestionAnswerright:T,getQuestionDefault:I}=b.actions,E=e=>e.questionApp.questionSlide,P=e=>e.questionApp.questionType,_=e=>e.questionApp.addQuestion.text,M=e=>e.questionApp.addQuestion.category,F=e=>e.questionApp.addQuestion,O=b.reducer,L=(0,f.configureStore)({reducer:{[a.K.reducerPath]:a.K.reducer,questionApp:O},middleware:e=>e().concat(a.K.middleware)}),$=()=>(0,s.useDispatch)(),G=s.useSelector;var W=n(136),D=n(512);const R=W.forwardRef((function({title:e,titleId:t,...n},s){return W.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),e?W.createElement("title",{id:t},e):null,W.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))})),K=window.Telegram.WebApp;function z({text:e,onSubmit:t}){return e.length>10&&"?"===e.substring(e.length-1)?(K.MainButton.setText("Следующий шаг"),K.MainButton.show(),K.onEvent("mainButtonClicked",t)):K.MainButton.hide(),(0,w.jsxs)("div",{className:"py-4",children:[(0,w.jsxs)("div",{className:"mt-1 flex items-center gap-x-1.5",children:[e.length>=10&&(0,w.jsx)(D.c,{className:"h-5 w-5 text-green-600","aria-hidden":"true"}),e.length<10&&(0,w.jsx)(R,{className:"h-5 w-5 text-red-500","aria-hidden":"true"}),(0,w.jsx)("span",{className:"max-w-[80%] text-xs "+(e.length>=10?"text-green-600":"text-red-500"),children:"Минимальная длина текста вопроса должна составлять не менее 10 символов"})]}),(0,w.jsxs)("div",{className:"mt-1 flex items-center gap-x-1.5",children:["?"===e.substring(e.length-1)&&(0,w.jsx)(D.c,{className:"h-5 w-5 text-green-600","aria-hidden":"true"}),"?"!=e.substring(e.length-1)&&(0,w.jsx)(R,{className:"h-5 w-5 text-red-500","aria-hidden":"true"}),(0,w.jsx)("span",{className:"max-w-[80%] text-xs "+("?"===e.substring(e.length-1)?"text-green-600":"text-red-500"),children:"Сформулируйте вопрос так, чтобы он заканчивался вопросительным знаком"})]})]})}function U({onSubmit:e}){const t=window.Telegram.WebApp,n=G(_),s=$(),[a,o]=(0,W.useState)("");(0,W.useEffect)((()=>{""!=n&&t.showConfirm("Применить несохранённый черновик?",(e=>e?i(n):s(I(""))))}),[]);const i=e=>{o(e),s(S(e))};return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("div",{className:"py-2",children:[(0,w.jsx)(r.SimpleTextArea,{label:"Текст вопроса:",rows:5,value:a,func:e=>i(e.target.value)}),(0,w.jsx)(z,{text:a,onSubmit:e})]})})}function H({step:e,stepsCount:t}){let n=[];for(let s=0;s<t;s++)n.push({id:s,status:e>s?"complete":"upcoming"});return(0,w.jsxs)("nav",{className:"flex items-center px-8 pt-8 pb-4 bg-[var(--tg-theme-bg-color)] space-x-3 justify-center","aria-label":"Progress",children:[(0,w.jsxs)("p",{className:"text-sm font-medium text-[var(--tg-theme-accent-text-color)]",children:["Шаг ",e," из ",t]}),(0,w.jsx)("ol",{role:"list",className:"ml-8 flex items-center space-x-5",children:n.map((e=>(0,w.jsx)("li",{children:"complete"===e.status?(0,w.jsx)("span",{className:"block h-2.5 w-2.5 rounded-full bg-[var(--tg-theme-accent-text-color)]"}):"current"===e.status?(0,w.jsxs)("span",{className:"relative flex items-center justify-center","aria-current":"step",children:[(0,w.jsx)("span",{className:"absolute flex h-5 w-5 p-px","aria-hidden":"true",children:(0,w.jsx)("span",{className:"h-full w-full rounded-full bg-[var(--tg-theme-text-color)]"})}),(0,w.jsx)("span",{className:"relative block h-2.5 w-2.5 rounded-full bg-[var(--tg-theme-accent-text-color)]","aria-hidden":"true"})]}):(0,w.jsx)("span",{className:"block h-2.5 w-2.5 rounded-full bg-[var(--tg-theme-text-color)]"})},e.id)))})]})}var V=n(424);const Y=window.Telegram.WebApp;function J({onSubmit:e}){let t=!1;const n=G(M),{data:s,isSuccess:a}=(0,V.useGetCategoryQuery)(""),o=$(),[i,l]=(0,W.useState)(0!=n?null==s?void 0:s.find((e=>e.id===n)):{id:0,name:" "});return t&&(Y.MainButton.setText("Следующий шаг"),Y.MainButton.show(),Y.onEvent("mainButtonClicked",e)),(0,w.jsx)("div",{className:"py-2",children:a&&(0,w.jsx)(r.SimpleCategorySelect,{value:i||{id:0,name:" "},func:e=>{l(e),o(k(e.id)),t=!0},data:s})})}const X=window.Telegram.WebApp;function Z({answer1:e,answer2:t,answer3:n,answer4:s,answerRight:r,onSubmit:a}){return e.length>=10&&e.length<=25&&t.length>=10&&t.length<=25&&n.length>=10&&n.length<=25&&s.length>=10&&s.length<=25&&0!=r?(X.MainButton.setText("Добавить вопрос"),X.MainButton.show(),X.onEvent("mainButtonClicked",a)):X.MainButton.hide(),(0,w.jsxs)("div",{className:"py-4",children:[(0,w.jsxs)("div",{className:"mt-1 flex items-center gap-x-1.5",children:[Boolean(e.length>25||t.length>25||n.length>25||s.length>25)?(0,w.jsx)(R,{className:"h-5 w-5 text-red-500","aria-hidden":"true"}):(0,w.jsx)(D.c,{className:"h-5 w-5 text-green-600","aria-hidden":"true"}),(0,w.jsx)("span",{className:"max-w-[80%] text-xs "+(Boolean(e.length<=25&&t.length<=25&&n.length<=25&&s.length<=25)?"text-green-600":"text-red-500"),children:"Максимальная длина текста ответов должна составлять не более 25 символов"})]}),(0,w.jsxs)("div",{className:"mt-1 flex items-center gap-x-1.5",children:[Boolean(e.length>=10&&t.length>=10&&n.length>=10&&s.length>=10)?(0,w.jsx)(D.c,{className:"h-5 w-5 text-green-600","aria-hidden":"true"}):(0,w.jsx)(R,{className:"h-5 w-5 text-red-500","aria-hidden":"true"}),(0,w.jsx)("span",{className:"max-w-[80%] text-xs "+(e.length>=10&&t.length>=10&&n.length>=10&&s.length>=10?"text-green-600":"text-red-500"),children:"Минимальная длина текста ответов должна составлять не менее 10 символов"})]}),(0,w.jsxs)("div",{className:"mt-1 flex items-center gap-x-1.5",children:[0!=r&&(0,w.jsx)(D.c,{className:"h-5 w-5 text-green-600","aria-hidden":"true"}),0===r&&(0,w.jsx)(R,{className:"h-5 w-5 text-red-500","aria-hidden":"true"}),(0,w.jsx)("span",{className:"max-w-[80%] text-xs "+(0!=r?"text-green-600":"text-red-500"),children:"Обязательно нужно выбрать верный вариант ответа (вопросы для всех групп проходят модерацию)"})]})]})}function ee({onSubmit:e}){const t=G(F),[n,s]=(0,W.useState)(t.answerright),[r,a]=(0,W.useState)(t.answer1),[o,i]=(0,W.useState)(t.answer2),[l,c]=(0,W.useState)(t.answer3),[d,u]=(0,W.useState)(t.answer4),x=$(),h=e=>{s(e),x(T(e))};return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"py-2",children:[(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"answer1",className:"block text-sm font-medium leading-6 text-[var(--tg-theme-text-color)]",children:"Вариант ответа 1"}),(0,w.jsxs)("div",{className:"mt-2 flex rounded-md shadow-sm",children:[(0,w.jsx)("div",{className:"relative flex flex-grow items-stretch focus-within:z-10",children:(0,w.jsx)("input",{type:"text",name:"answer1",id:"answer1",className:"block w-full bg-[var(--tg-theme-bg-color)] rounded-none rounded-l-md border-0 py-1.5 pl-2 text-[var(--tg-theme-text-color)] ring-1 ring-inset ring-[var(--tg-theme-text-color)] placeholder:text-gray-400",placeholder:"Вариант ответа 1",value:r,onChange:e=>{return t=e.target.value,a(t),void x(A(t));var t}})}),(0,w.jsx)("button",{type:"button",className:`relative -ml-px inline-flex items-center gap-x-1.5 rounded-r-md px-3 py-2 text-sm font-semibold text-[var(--tg-theme-text-color)] ring-1 ring-inset ring-[var(--tg-theme-text-color)] ${1===n&&"bg-[var(--tg-theme-accent-text-color)]"}`,onClick:()=>h(1),children:1===n?(0,w.jsx)(D.c,{className:"-ml-0.5 h-5 w-5 text-[var(--tg-theme-text-color)]","aria-hidden":"true"}):(0,w.jsx)(R,{className:"-ml-0.5 h-5 w-5 text-[var(--tg-theme-text-color)]","aria-hidden":"true"})})]})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"answer2",className:"block text-sm font-medium leading-6 text-[var(--tg-theme-text-color)]",children:"Вариант ответа 2"}),(0,w.jsxs)("div",{className:"mt-2 flex rounded-md shadow-sm",children:[(0,w.jsx)("div",{className:"relative flex flex-grow items-stretch focus-within:z-10",children:(0,w.jsx)("input",{type:"text",name:"answer2",id:"answer2",className:"block w-full bg-[var(--tg-theme-bg-color)] rounded-none rounded-l-md border-0 py-1.5 pl-2 text-[var(--tg-theme-text-color)] ring-1 ring-inset ring-[var(--tg-theme-text-color)] placeholder:text-gray-400",placeholder:"Вариант ответа 2",value:o,onChange:e=>{return t=e.target.value,i(t),void x(C(t));var t}})}),(0,w.jsx)("button",{type:"button",className:`relative -ml-px inline-flex items-center gap-x-1.5 rounded-r-md px-3 py-2 text-sm font-semibold text-[var(--tg-theme-text-color)] ring-1 ring-inset ring-[var(--tg-theme-text-color)] ${2===n&&"bg-[var(--tg-theme-accent-text-color)]"}`,onClick:()=>h(2),children:2===n?(0,w.jsx)(D.c,{className:"-ml-0.5 h-5 w-5 text-[var(--tg-theme-text-color)]","aria-hidden":"true"}):(0,w.jsx)(R,{className:"-ml-0.5 h-5 w-5 text-[var(--tg-theme-text-color)]","aria-hidden":"true"})})]})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"answer3",className:"block text-sm font-medium leading-6 text-[var(--tg-theme-text-color)]",children:"Вариант ответа 3"}),(0,w.jsxs)("div",{className:"mt-2 flex rounded-md shadow-sm",children:[(0,w.jsx)("div",{className:"relative flex flex-grow items-stretch focus-within:z-10",children:(0,w.jsx)("input",{type:"text",name:"answer3",id:"answer3",className:"block w-full bg-[var(--tg-theme-bg-color)] rounded-none rounded-l-md border-0 py-1.5 pl-2 text-[var(--tg-theme-text-color)] ring-1 ring-inset ring-[var(--tg-theme-text-color)] placeholder:text-gray-400",placeholder:"Вариант ответа 3",value:l,onChange:e=>{return t=e.target.value,c(t),void x(B(t));var t}})}),(0,w.jsx)("button",{type:"button",className:`relative -ml-px inline-flex items-center gap-x-1.5 rounded-r-md px-3 py-2 text-sm font-semibold text-[var(--tg-theme-text-color)] ring-1 ring-inset ring-[var(--tg-theme-text-color)] ${3===n&&"bg-[var(--tg-theme-accent-text-color)]"}`,onClick:()=>h(3),children:3===n?(0,w.jsx)(D.c,{className:"-ml-0.5 h-5 w-5 text-[var(--tg-theme-text-color)]","aria-hidden":"true"}):(0,w.jsx)(R,{className:"-ml-0.5 h-5 w-5 text-[var(--tg-theme-text-color)]","aria-hidden":"true"})})]})]}),(0,w.jsxs)("div",{children:[(0,w.jsx)("label",{htmlFor:"answer4",className:"block text-sm font-medium leading-6 text-[var(--tg-theme-text-color)]",children:"Вариант ответа 4"}),(0,w.jsxs)("div",{className:"mt-2 flex rounded-md shadow-sm",children:[(0,w.jsx)("div",{className:"relative flex flex-grow items-stretch focus-within:z-10",children:(0,w.jsx)("input",{type:"text",name:"answer4",id:"answer4",className:"block w-full bg-[var(--tg-theme-bg-color)] rounded-none rounded-l-md border-0 py-1.5 pl-2 text-[var(--tg-theme-text-color)] ring-1 ring-inset ring-[var(--tg-theme-text-color)] placeholder:text-gray-400",placeholder:"Вариант ответа 4",value:d,onChange:e=>{return t=e.target.value,u(t),void x(q(t));var t}})}),(0,w.jsx)("button",{type:"button",className:`relative -ml-px inline-flex items-center gap-x-1.5 rounded-r-md px-3 py-2 text-sm font-semibold text-[var(--tg-theme-text-color)] ring-1 ring-inset ring-[var(--tg-theme-text-color)] ${4===n&&"bg-[var(--tg-theme-accent-text-color)]"}`,onClick:()=>h(4),children:4===n?(0,w.jsx)(D.c,{className:"-ml-0.5 h-5 w-5 text-[var(--tg-theme-text-color)]","aria-hidden":"true"}):(0,w.jsx)(R,{className:"-ml-0.5 h-5 w-5 text-[var(--tg-theme-text-color)]","aria-hidden":"true"})})]})]})]}),(0,w.jsx)(Z,{answer1:r,answer2:o,answer3:l,answer4:d,answerRight:n,onSubmit:e})]})}const te=()=>{const e=window.Telegram.WebApp,t=$(),n=G(F);async function s(){if(!l)return d();l&&(""!=n.text&&await u({chat:521884639,text:n.text,category:n.category,answer1:n.answer1,answer2:n.answer2,answer3:n.answer3,answer4:n.answer4,answerright:n.answerright}),e.MainButton.hide,t(y(!1)),t(I("")))}console.log(G(L.getState));const{steps:a,currentStepIndex:o,step:i,isLastStep:l,next:d}=function(e){const[t,n]=(0,W.useState)(0);return{currentStepIndex:t,step:e[t],steps:e,isFirstStep:0===t,isLastStep:t===e.length-1,goTo:function(e){n(e)},next:function(){n((t=>t>=e.length-1?t:t+1))},back:function(){n((e=>e<=0?e:e-1))}}}([(0,w.jsx)(U,{onSubmit:s}),(0,w.jsx)(J,{onSubmit:s}),(0,w.jsx)(ee,{onSubmit:s})]),[u,{}]=c();return(0,w.jsxs)(r.Page,{children:[(0,w.jsx)(r.HeaderBlock,{children:(0,w.jsx)(H,{step:o+1,stepsCount:a.length})}),(0,w.jsx)(r.MainBlock,{children:i})]})},ne=()=>{const e=window.Telegram.WebApp,t=$(),n=G(E),s=G(P);return n&&(e.BackButton.show(),e.onEvent("backButtonClicked",(()=>{t(y(!1))}))),(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(r.GlobalHeader,{children:(0,w.jsx)(r.ButtonIcon,{firstIcon:!0,text:"Добавить вопрос",color:"[var(--tg-theme-accent-text-color)]",icon:"add",func:()=>{t(N("addQuestion")),t(y(!0))}})}),(0,w.jsx)(r.Page,{children:(0,w.jsxs)(r.MainBlock,{children:[(0,w.jsx)("div",{className:"text-center pt-9"}),(0,w.jsx)(j,{})]})}),(0,w.jsx)(r.SlidePage,{slide:n,children:"addQuestion"==s&&(0,w.jsx)(te,{})})]})},se=()=>(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(s.Provider,{store:L,children:(0,w.jsx)(ne,{})})})},28:(e,t,n)=>{n.d(t,{K:()=>o});var s=n(392),r=n(280);const a=(0,s.c9)((0,s._)({baseUrl:"https://api80q.ru/viktorinaonlinebot/"}),{maxRetries:5}),o=(0,r.KS)({reducerPath:"vikApi",refetchOnFocus:!0,baseQuery:a,tagTypes:["TypeGroup","TimeGroup","CategoryGroup","Validate","CountAvailableQuestionGroup","CountPublishedQuestionGroup"],endpoints:()=>({})})},488:(e,t,n)=>{var s=n(136),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var s,a={},c=null,d=null;for(s in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,s)&&!l.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===a[s]&&(a[s]=t[s]);return{$$typeof:r,type:e,key:c,ref:d,props:a,_owner:i.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},0:(e,t,n)=>{e.exports=n(488)}}]);