(self.webpackChunkchat_room=self.webpackChunkchat_room||[]).push([[224],{224:(a,o,e)=>{e.r(o),e.d(o,{default:()=>S});var t=e(215),c=e(420),s=e(885);const i=(0,c.L5)((0,c.cw)({baseUrl:"https://api80q.ru/mdws/chats"})),n=(0,s.xP)({reducerPath:"mdwsApi",refetchOnFocus:!0,baseQuery:i,tagTypes:["Validate"],endpoints:()=>({})}),l=n.injectEndpoints({endpoints:a=>({validate:a.query({query:a=>({url:`chat/validateUser/${a}`}),providesTags:["Validate"]}),join:a.mutation({query:({chat:a,user:o})=>({url:"/join",method:"POST",body:{chat:a,user:o}})})})}),{useValidateQuery:r,useJoinMutation:d}=l;var h=e(85);const p=function({children:a}){return(0,h.jsx)("div",{className:"flex-1 overflow-auto bg-orange-200",children:(0,h.jsx)("div",{className:"py-2 px-3",children:a})})};var u=e(179),m=e(490);const C=({accessToken:a})=>((0,u.useEffect)((()=>{const o=(0,m.io)("https://api80q.ru/chat",{auth:{token:a},transports:["websocket","polling"]});o.on("chat_updated",(({data:a})=>{console.log(a)})),o.on("exception",(({data:a})=>{console.log(a)}))}),[a]),(0,h.jsx)("p",{children:(0,h.jsxs)(p,{children:[(0,h.jsx)("p",{children:"1"}),(0,h.jsx)("p",{children:"2"}),(0,h.jsx)("p",{children:"3"}),(0,h.jsx)("p",{children:"4"})]})})),x=()=>{const[a,{data:o}]=d();return(0,h.jsxs)("div",{className:"text-center p-10",children:[(0,h.jsx)("button",{className:"p-2 text-red-300 bg-slate-100",onClick:()=>(console.log("click1"),a({chat:10,user:3}),console.log("click2"),void console.log(o)),children:"Click"}),(0,h.jsx)(C,{accessToken:null==o?void 0:o.accessToken})]})};var y=e(638);const R=(0,y.createSlice)({name:"chatRoomApp",initialState:{chatRoomSlide:!1,chatRoomType:"",chatRoomChat:{isLoading:!1,wsErrors:[],isAdmin:!1,nominationCount:0,participantCount:0},chatRoomData:void 0},reducers:{setChatAccessToken:(a,o)=>{a.chatRoomChat.accessToken=o.payload},initializePoll:(a,o)=>{a.chatRoomChat.poll=o.payload},loadingChat:(a,o)=>{a.chatRoomChat.isLoading=o.payload},showChatRoomSlide:(a,o)=>{a.chatRoomSlide=o.payload},typeChatRoom:(a,o)=>{a.chatRoomType=o.payload},dataChatRoom:(a,o)=>{a.chatRoomData=o.payload}}}),{showChatRoomSlide:g,typeChatRoom:j,dataChatRoom:k,initializePoll:v,loadingChat:w,setChatAccessToken:T}=R.actions,f=R.reducer,b=(0,y.configureStore)({reducer:{[n.reducerPath]:n.reducer,chatRoomApp:f},middleware:a=>a().concat(n.middleware)}),S=()=>(0,h.jsx)(t.Provider,{store:b,children:(0,h.jsx)(x,{})})}}]);