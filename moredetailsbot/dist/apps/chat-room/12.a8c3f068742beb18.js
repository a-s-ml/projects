(self.webpackChunkchat_room=self.webpackChunkchat_room||[]).push([[12],{12:(o,e,a)=>{a.r(e);var t=a(179),c=a(873),s=a(215),n=a(420),i=a(885);const r=(0,n.L5)((0,n.cw)({baseUrl:"https://api80q.ru/mdws/chats"})),l=(0,i.xP)({reducerPath:"mdwsApi",refetchOnFocus:!0,baseQuery:r,tagTypes:["Validate"],endpoints:()=>({})}),d=l.injectEndpoints({endpoints:o=>({validate:o.query({query:o=>({url:`chat/validateUser/${o}`}),providesTags:["Validate"]}),join:o.mutation({query:({chat:o,user:e})=>({url:"/join",method:"POST",body:{chat:o,user:e}})})})}),{useValidateQuery:h,useJoinMutation:p}=d;var u=a(85);const m=function({children:o}){return(0,u.jsx)("div",{className:"flex-1 overflow-auto bg-orange-200",children:(0,u.jsx)("div",{className:"py-2 px-3",children:o})})};var x=a(490);const y=({accessToken:o})=>((0,t.useEffect)((()=>{const e=(0,x.io)("https://api80q.ru/chat",{auth:{token:o},transports:["websocket","polling"]});e.on("chat_updated",(({data:o})=>{console.log(o)})),e.on("exception",(({data:o})=>{console.log(o)}))}),[o]),(0,u.jsx)("p",{children:(0,u.jsxs)(m,{children:[(0,u.jsx)("p",{children:"1"}),(0,u.jsx)("p",{children:"2"}),(0,u.jsx)("p",{children:"3"}),(0,u.jsx)("p",{children:"4"})]})})),C=()=>{const[o,{data:e}]=p();return(0,u.jsxs)("div",{className:"text-center p-10",children:[(0,u.jsx)("button",{className:"p-2 text-red-300 bg-slate-100",onClick:()=>(console.log("click1"),o({chat:10,user:3}),console.log("click2"),void console.log(e)),children:"Click"}),(0,u.jsx)(y,{accessToken:null==e?void 0:e.accessToken})]})};var R=a(638);const j=(0,R.createSlice)({name:"chatRoomApp",initialState:{chatRoomSlide:!1,chatRoomType:"",chatRoomChat:{isLoading:!1,wsErrors:[],isAdmin:!1,nominationCount:0,participantCount:0},chatRoomData:void 0},reducers:{setChatAccessToken:(o,e)=>{o.chatRoomChat.accessToken=e.payload},initializePoll:(o,e)=>{o.chatRoomChat.poll=e.payload},loadingChat:(o,e)=>{o.chatRoomChat.isLoading=e.payload},showChatRoomSlide:(o,e)=>{o.chatRoomSlide=e.payload},typeChatRoom:(o,e)=>{o.chatRoomType=e.payload},dataChatRoom:(o,e)=>{o.chatRoomData=e.payload}}}),{showChatRoomSlide:g,typeChatRoom:k,dataChatRoom:v,initializePoll:w,loadingChat:T,setChatAccessToken:b}=j.actions,f=j.reducer,S=(0,R.configureStore)({reducer:{[l.reducerPath]:l.reducer,chatRoomApp:f},middleware:o=>o().concat(l.middleware)}),P=()=>(0,u.jsx)(s.Provider,{store:S,children:(0,u.jsx)(C,{})});c.H(document.getElementById("root")).render((0,u.jsx)(t.StrictMode,{children:(0,u.jsx)(P,{})}))},873:(o,e,a)=>{var t=a(67);e.H=t.createRoot,t.hydrateRoot}}]);