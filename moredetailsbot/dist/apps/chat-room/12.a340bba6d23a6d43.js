(self.webpackChunkchat_room=self.webpackChunkchat_room||[]).push([[12],{12:(e,a,o)=>{o.r(a);var t=o(179),c=o(873),s=o(215),r=o(420),n=o(885);const i=(0,r.L5)((0,r.cw)({baseUrl:"https://api80q.ru/mdws/chats"})),d=(0,n.xP)({reducerPath:"mdwsApi",refetchOnFocus:!0,baseQuery:i,tagTypes:["Validate"],endpoints:()=>({})}),h=d.injectEndpoints({endpoints:e=>({validate:e.query({query:e=>({url:`chat/validateUser/${e}`}),providesTags:["Validate"]}),join:e.mutation({query:({chat:e,user:a})=>({url:"/join",method:"POST",body:{chat:e,user:a}})})})}),{useValidateQuery:l,useJoinMutation:p}=h;var u=o(85);const m=function({children:e}){return(0,u.jsx)("div",{className:"flex-1 overflow-auto bg-orange-200",children:(0,u.jsx)("div",{className:"py-2 px-3",children:e})})};var y=o(490);const R=({accessToken:e})=>{const a=(0,y.io)("https://api80q.ru/chat",{auth:{token:e},transports:["websocket","polling"]});return(0,t.useEffect)((()=>{a.on("chat_updated",(({data:e})=>{console.log(e)}))}),[]),(0,t.useEffect)((()=>{a.on("exception",(({data:e})=>{console.log(e)}))}),[]),(0,u.jsx)("p",{children:(0,u.jsxs)(m,{children:[(0,u.jsx)("p",{children:"1"}),(0,u.jsx)("p",{children:"2"}),(0,u.jsx)("p",{children:"3"}),(0,u.jsx)("p",{children:"4"})]})})},x=()=>{const[e,{data:a}]=p();return e({chat:10,user:3}),(0,u.jsx)("p",{children:a&&(0,u.jsx)(R,{accessToken:a.accessToken})})};var C=o(638);const j=(0,C.createSlice)({name:"chatRoomApp",initialState:{chatRoomSlide:!1,chatRoomType:"",chatRoomChat:{isLoading:!1,wsErrors:[],isAdmin:!1,nominationCount:0,participantCount:0},chatRoomData:void 0},reducers:{setChatAccessToken:(e,a)=>{e.chatRoomChat.accessToken=a.payload},initializePoll:(e,a)=>{e.chatRoomChat.poll=a.payload},loadingChat:(e,a)=>{e.chatRoomChat.isLoading=a.payload},showChatRoomSlide:(e,a)=>{e.chatRoomSlide=a.payload},typeChatRoom:(e,a)=>{e.chatRoomType=a.payload},dataChatRoom:(e,a)=>{e.chatRoomData=a.payload}}}),{showChatRoomSlide:g,typeChatRoom:v,dataChatRoom:k,initializePoll:w,loadingChat:f,setChatAccessToken:T}=j.actions,S=j.reducer,b=(0,C.configureStore)({reducer:{[d.reducerPath]:d.reducer,chatRoomApp:S},middleware:e=>e().concat(d.middleware)}),P=()=>(0,u.jsx)(s.Provider,{store:b,children:(0,u.jsx)(x,{})});c.H(document.getElementById("root")).render((0,u.jsx)(t.StrictMode,{children:(0,u.jsx)(P,{})}))},873:(e,a,o)=>{var t=o(67);a.H=t.createRoot,t.hydrateRoot}}]);