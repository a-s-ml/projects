(self.webpackChunkchat_room=self.webpackChunkchat_room||[]).push([[12],{12:(e,o,a)=>{a.r(o);var t=a(179),s=a(873),c=a(215),n=a(420),r=a(885);const i=(0,n.L5)((0,n.cw)({baseUrl:"https://api80q.ru/mdws/chats"})),d=(0,r.xP)({reducerPath:"mdwsApi",refetchOnFocus:!0,baseQuery:i,tagTypes:["Validate"],endpoints:()=>({})}),l=d.injectEndpoints({endpoints:e=>({validate:e.query({query:e=>({url:`chat/validateUser/${e}`}),providesTags:["Validate"]}),join:e.mutation({query:({chat:e,user:o})=>({url:"/join",method:"POST",body:{chat:e,user:o}})})})}),{useValidateQuery:h,useJoinMutation:p}=l;var u=a(85);const m=function({children:e}){return(0,u.jsx)("div",{className:"flex-1 overflow-auto bg-orange-200",children:(0,u.jsx)("div",{className:"py-2 px-3",children:e})})};var x=a(490);const y=({accessToken:e})=>{console.log("accessToken",e);const[o,a]=(0,t.useState)([]);return(0,t.useEffect)((()=>{const o=(0,x.io)("https://api80q.ru/chat",{auth:{token:e},transports:["websocket","polling"]}),a=(...e)=>{console.log(e)};o.on("chat_updated",a),o.on("exception",a),o.on("message",a)}),[e]),(0,u.jsx)("p",{children:(0,u.jsxs)(m,{children:[(0,u.jsx)("p",{children:"1"}),(0,u.jsx)("p",{children:"2"}),(0,u.jsx)("p",{children:"3"}),(0,u.jsx)("p",{children:"4"}),o.map((e=>(0,u.jsx)("p",{children:e})))]})})},C=()=>{const[e,{data:o}]=p();return(0,u.jsxs)("div",{className:"text-center p-10",children:[(0,u.jsx)("button",{className:"p-2 text-red-300 bg-slate-100",onClick:()=>(e({chat:10,user:3}),void console.log(o)),children:"Click"}),(0,u.jsx)(y,{accessToken:null==o?void 0:o.accessToken})]})};var R=a(638);const j=(0,R.createSlice)({name:"chatRoomApp",initialState:{chatRoomSlide:!1,chatRoomType:"",chatRoomChat:{isLoading:!1,wsErrors:[],isAdmin:!1,nominationCount:0,participantCount:0},chatRoomData:void 0},reducers:{setChatAccessToken:(e,o)=>{e.chatRoomChat.accessToken=o.payload},initializePoll:(e,o)=>{e.chatRoomChat.poll=o.payload},loadingChat:(e,o)=>{e.chatRoomChat.isLoading=o.payload},showChatRoomSlide:(e,o)=>{e.chatRoomSlide=o.payload},typeChatRoom:(e,o)=>{e.chatRoomType=o.payload},dataChatRoom:(e,o)=>{e.chatRoomData=o.payload}}}),{showChatRoomSlide:g,typeChatRoom:v,dataChatRoom:k,initializePoll:w,loadingChat:T,setChatAccessToken:S}=j.actions,b=j.reducer,f=(0,R.configureStore)({reducer:{[d.reducerPath]:d.reducer,chatRoomApp:b},middleware:e=>e().concat(d.middleware)}),P=()=>(0,u.jsx)(c.Provider,{store:f,children:(0,u.jsx)(C,{})});s.H(document.getElementById("root")).render((0,u.jsx)(t.StrictMode,{children:(0,u.jsx)(P,{})}))},873:(e,o,a)=>{var t=a(67);o.H=t.createRoot,t.hydrateRoot}}]);