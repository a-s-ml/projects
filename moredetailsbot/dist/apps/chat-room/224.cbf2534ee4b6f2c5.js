(self.webpackChunkchat_room=self.webpackChunkchat_room||[]).push([[224],{224:(a,e,o)=>{o.r(e),o.d(e,{default:()=>b});var t=o(215),c=o(420),s=o(885);const n=(0,c.L5)((0,c.cw)({baseUrl:"https://api80q.ru/mdws/chats"})),i=(0,s.xP)({reducerPath:"mdwsApi",refetchOnFocus:!0,baseQuery:n,tagTypes:["Validate"],endpoints:()=>({})}),r=i.injectEndpoints({endpoints:a=>({validate:a.query({query:a=>({url:`chat/validateUser/${a}`}),providesTags:["Validate"]}),join:a.mutation({query:({chat:a,user:e})=>({url:"/join",method:"POST",body:{chat:a,user:e}})})})}),{useValidateQuery:d,useJoinMutation:h}=r;var l=o(85);const p=function({children:a}){return(0,l.jsx)("div",{className:"flex-1 overflow-auto bg-orange-200",children:(0,l.jsx)("div",{className:"py-2 px-3",children:a})})};var u=o(179),m=o(490);const y=({accessToken:a})=>{const e=(0,m.io)("https://api80q.ru/chat",{auth:{token:a},transports:["websocket","polling"]});return(0,u.useEffect)((()=>{e.on("chat_updated",(({data:a})=>{console.log(a)}))}),[]),(0,u.useEffect)((()=>{e.on("exception",(({data:a})=>{console.log(a)}))}),[]),(0,l.jsx)("p",{children:(0,l.jsxs)(p,{children:[(0,l.jsx)("p",{children:"1"}),(0,l.jsx)("p",{children:"2"}),(0,l.jsx)("p",{children:"3"}),(0,l.jsx)("p",{children:"4"})]})})},C=()=>{const[a,{data:e}]=h();return a({chat:10,user:3}),(0,l.jsx)("p",{children:e&&(0,l.jsx)(y,{accessToken:e.accessToken})})};var R=o(638);const x=(0,R.createSlice)({name:"chatRoomApp",initialState:{chatRoomSlide:!1,chatRoomType:"",chatRoomChat:{isLoading:!1,wsErrors:[],isAdmin:!1,nominationCount:0,participantCount:0},chatRoomData:void 0},reducers:{setChatAccessToken:(a,e)=>{a.chatRoomChat.accessToken=e.payload},initializePoll:(a,e)=>{a.chatRoomChat.poll=e.payload},loadingChat:(a,e)=>{a.chatRoomChat.isLoading=e.payload},showChatRoomSlide:(a,e)=>{a.chatRoomSlide=e.payload},typeChatRoom:(a,e)=>{a.chatRoomType=e.payload},dataChatRoom:(a,e)=>{a.chatRoomData=e.payload}}}),{showChatRoomSlide:j,typeChatRoom:f,dataChatRoom:g,initializePoll:k,loadingChat:v,setChatAccessToken:w}=x.actions,T=x.reducer,S=(0,R.configureStore)({reducer:{[i.reducerPath]:i.reducer,chatRoomApp:T},middleware:a=>a().concat(i.middleware)}),b=()=>(0,l.jsx)(t.Provider,{store:S,children:(0,l.jsx)(C,{})})}}]);